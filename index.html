<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Tee's Planner">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#4a90d9">
<meta name="format-detection" content="telephone=no">
<title>Tee's Planner</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2064%2064%22%3E%3Crect%20width%3D%2264%22%20height%3D%2264%22%20rx%3D%2214%22%20fill%3D%22%234a90d9%22/%3E%3Cpath%20d%3D%22M18%2022h28v4H18zM18%2030h22v4H18zM18%2038h28v4H18z%22%20fill%3D%22white%22/%3E%3C/svg%3E">
<link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20180%20180%22%3E%3Crect%20width%3D%22180%22%20height%3D%22180%22%20rx%3D%2236%22%20fill%3D%22%234a90d9%22/%3E%3Cpath%20d%3D%22M45%2060h90v12H45zM45%2084h70v12H45zM45%20108h90v12H45z%22%20fill%3D%22white%22/%3E%3C/svg%3E">
<link rel="manifest" href="./manifest.webmanifest">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800;900&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
/* CRITICAL iOS Safari fix - must be before external CSS */
*, *::before, *::after {
  box-sizing: border-box !important;
  max-width: 100vw;
}
html {
  width: 100% !important;
  max-width: 100vw !important;
  overflow-x: hidden !important;
  overflow-y: hidden !important;
  -webkit-text-size-adjust: 100%;
  height: 100%;
  position: fixed;
}
body {
  width: 100% !important;
  max-width: 100vw !important;
  overflow: hidden !important;
  margin: 0 !important;
  padding: 0 !important;
  height: 100%;
  position: fixed;
}
.app, .main, .book {
  width: 100% !important;
  max-width: 100% !important;
  overflow-x: hidden !important;
}
/* iOS PWA scroll fix */
@media (max-width: 980px) {
  html, body {
    position: fixed !important;
    width: 100% !important;
    height: 100% !important;
    overflow: hidden !important;
  }
  .app {
    position: absolute !important;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
  }
  .topbar {
    flex-shrink: 0 !important;
  }
  .main {
    position: relative !important;
    flex: 1 !important;
    min-height: 0 !important;
    overflow-y: scroll !important;
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch !important;
    overscroll-behavior-y: contain;
  }
  .book {
    min-height: 100% !important;
    overflow: visible !important;
  }
  .pagehost {
    min-height: 100% !important;
    overflow: visible !important;
    perspective: 1800px;
    -webkit-perspective: 1800px;
    transform-style: preserve-3d;
    -webkit-transform-style: preserve-3d;
    position: relative;
  }
  /* During flip animation, lock height */
  .pagehost.flipping,
  .pagehost.flipping-back {
    height: calc(100vh - 80px) !important;
    min-height: calc(100vh - 80px) !important;
    max-height: calc(100vh - 80px) !important;
    overflow: hidden !important;
  }
  /* Current page relative for scroll */
  .page.current {
    position: relative !important;
  }
  /* During flip, current becomes absolute */
  .pagehost.flipping .page.current,
  .pagehost.flipping-back .page.current {
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 100% !important;
    overflow: hidden !important;
  }
  /* Consistent height for content */
  .pagecontent, .fillPage {
    min-height: calc(100vh - 120px) !important;
    height: auto !important;
    overflow: visible !important;
    padding-bottom: 200px !important;
  }
  /* Dashboard different */
  .dashboard-root {
    height: auto !important;
    min-height: auto !important;
    overflow: visible !important;
    padding-bottom: 200px !important;
  }
}
</style>
<link rel="stylesheet" href="./styles.css">
</head>
<body>
<div class="app">
  <header class="topbar">
    <button class="iconbtn" id="btnMenu" aria-label="Open menu">☰</button>
    <div class="brand">
      <div class="brand-mark"></div>
      <div class="brand-text">
        <div class="brand-title">Tee's Planner</div>
        <div class="brand-sub">Bloom where you're planted ✿</div>
      </div>
    </div>
    <div class="top-actions">
      <div class="date-selector">
        <button class="btn ghost small" id="btnPrevDay" title="Previous day">◀</button>
        <input type="date" id="globalDatePicker" class="date-input" />
        <button class="btn ghost small" id="btnNextDay" title="Next day">▶</button>
        <button class="btn ghost small" id="btnToday" title="Go to today">Today</button>
      </div>
      <button class="btn ghost" id="btnExport">Export</button>
      <label class="btn ghost filebtn"> Import <input type="file" id="fileImport" accept="application/json" /> </label>
    </div>
  </header>

  <aside class="drawer hidden" id="drawer" aria-hidden="true">
    <div class="drawer-panel">
      <div class="drawer-head">
        <div class="drawer-title">✿ Menu</div>
        <button class="iconbtn" id="btnCloseMenu" aria-label="Close menu">✕</button>
      </div>
      <nav class="nav">
        <button class="navitem" data-route="cover">❀ Cover</button>
        <button class="navitem" data-route="dashboard">✦ Today</button>
        <button class="navitem" data-route="goals">✿ Goals</button>
        <button class="navitem" data-route="relationships">❀ People</button>
        <button class="navitem" data-route="finance">✿ Money</button>
        <button class="navitem" data-route="fitness">❀ Wellness</button>
        <button class="navitem" data-route="spiritual">✿ Faith</button>
        <button class="navitem" data-route="weekly">❀ History</button>
        <button class="navitem" data-route="diary">✿ Diary</button>
        <button class="navitem" data-route="partner">♥ Partner</button>
        <button class="navitem" data-route="settings">❀ Settings</button>
      </nav>
      <div class="drawer-foot">
        <div class="drawer-tip">✿ Add to home screen for the best experience</div>
      </div>
    </div>
  </aside>

  <main class="main">
    <div class="book">
      <div class="spine"></div>
      <div class="pagehost" id="pageHost"></div>
    </div>
  </main>
  
  <!-- Page navigation buttons - outside main for proper fixed positioning -->
  <button class="page-nav-btn prev" id="btnPrevPage" aria-label="Previous page">&#8249;</button>
  <button class="page-nav-btn next" id="btnNextPage" aria-label="Next page">&#8250;</button>
</div>

<!-- Modal -->
<div class="modal-backdrop hidden" id="modalBackdrop" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-header">
      <div class="modal-title" id="modalTitle"></div>
      <button class="iconbtn" id="modalClose" aria-label="Close modal">✕</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
    <div class="modal-footer" id="modalFooter"></div>
  </div>
</div>

<script type="module" src="./app.js"></script>
</body>
</html>
